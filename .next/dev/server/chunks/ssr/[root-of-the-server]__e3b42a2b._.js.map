{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Oma%20kansio/alynappi-klvl/src/app/page.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useChat } from '@ai-sdk/react'\r\nimport { TextStreamChatTransport, isTextUIPart } from 'ai'\r\nimport { useEffect, useRef, useState } from 'react'\r\n\r\nexport default function ChatPage() {\r\n  const [input, setInput] = useState('')\r\n  const { messages, sendMessage, status } = useChat({\r\n    transport: new TextStreamChatTransport({ api: '/api/chat' }),\r\n  })\r\n  const scrollRef = useRef<HTMLDivElement>(null)\r\n\r\n  useEffect(() => {\r\n    if (scrollRef.current) {\r\n      scrollRef.current.scrollTop = scrollRef.current.scrollHeight\r\n    }\r\n  }, [messages])\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    if (input.trim() && status !== 'streaming') {\r\n      sendMessage({ text: input })\r\n      setInput('')\r\n    }\r\n  }\r\n\r\n  const getMessageText = (message: typeof messages[0]) => {\r\n    return message.parts\r\n      .filter(isTextUIPart)\r\n      .map(part => part.text)\r\n      .join('')\r\n  }\r\n\r\n  return (\r\n    <main className=\"flex flex-col h-screen max-h-screen bg-slate-50 overflow-hidden\">\r\n      {/* YLÄPALKKI */}\r\n      <header className=\"bg-klvl-blue text-white p-4 shadow-lg shrink-0 z-10\">\r\n        <div className=\"max-w-2xl mx-auto flex items-center gap-3\">\r\n          <div className=\"w-10 h-10 bg-klvl-yellow rounded-full flex items-center justify-center text-klvl-blue font-bold text-xl shadow-inner\">\r\n            Ä\r\n          </div>\r\n          <div>\r\n            <h1 className=\"text-xl font-bold tracking-tight\">Äly-Nappi Arkisto</h1>\r\n            <p className=\"text-[10px] uppercase tracking-widest opacity-80\">KLVL ry:n tekoälyavustaja</p>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      {/* VIESTIALUE */}\r\n      <div ref={scrollRef} className=\"flex-1 overflow-y-auto p-4 space-y-4\">\r\n        <div className=\"max-w-2xl mx-auto w-full\">\r\n          {messages.length === 0 && (\r\n            <div className=\"text-center py-16 px-6 bg-white rounded-3xl shadow-sm border border-slate-100 mt-10\">\r\n              <h2 className=\"text-klvl-blue text-2xl font-bold mb-4\">Hei! Mitä haluaisit tietää Nappi-lehdistä?</h2>\r\n              <p className=\"text-slate-600 italic\">Etsin vastaukset suoraan arkistosta ja kerron lähteet.</p>\r\n            </div>\r\n          )}\r\n\r\n          {messages.map((m) => (\r\n            <div key={m.id} className={`flex ${m.role === 'user' ? 'justify-end' : 'justify-start'} mb-4`}>\r\n              <div className={`max-w-[85%] p-4 rounded-2xl shadow-sm leading-relaxed ${\r\n                m.role === 'user' \r\n                  ? 'bg-klvl-blue text-white rounded-tr-none' \r\n                  : 'bg-white text-slate-800 rounded-tl-none border border-slate-200'\r\n              }`}>\r\n                <div className=\"whitespace-pre-wrap\">{getMessageText(m)}</div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* SYÖTTÖKENTTÄ */}\r\n      <div className=\"p-4 bg-white border-t border-slate-200 shrink-0\">\r\n        <form onSubmit={handleSubmit} className=\"max-w-2xl mx-auto flex gap-2\">\r\n          <input\r\n            className=\"flex-1 p-4 bg-slate-100 rounded-2xl focus:ring-2 focus:ring-klvl-blue outline-none text-slate-800 transition-all shadow-inner\"\r\n            value={input}\r\n            placeholder=\"Kysy jotain Napista...\"\r\n            onChange={(e) => setInput(e.target.value)}\r\n            disabled={status === 'streaming'}\r\n          />\r\n          <button \r\n            type=\"submit\" \r\n            disabled={status === 'streaming' || !input.trim()}\r\n            className=\"px-6 bg-klvl-yellow hover:bg-yellow-400 disabled:opacity-50 disabled:cursor-not-allowed text-klvl-blue font-bold rounded-2xl transition-all shadow-md active:scale-95\"\r\n          >\r\n            {status === 'streaming' ? '...' : 'Kysy'}\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </main>\r\n  )\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMe,SAAS;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,EAAE,QAAQ,EAAE,WAAW,EAAE,MAAM,EAAE,GAAG,IAAA,iKAAO,EAAC;QAChD,WAAW,IAAI,+KAAuB,CAAC;YAAE,KAAK;QAAY;IAC5D;IACA,MAAM,YAAY,IAAA,+MAAM,EAAiB;IAEzC,IAAA,kNAAS,EAAC;QACR,IAAI,UAAU,OAAO,EAAE;YACrB,UAAU,OAAO,CAAC,SAAS,GAAG,UAAU,OAAO,CAAC,YAAY;QAC9D;IACF,GAAG;QAAC;KAAS;IAEb,MAAM,eAAe,CAAC;QACpB,EAAE,cAAc;QAChB,IAAI,MAAM,IAAI,MAAM,WAAW,aAAa;YAC1C,YAAY;gBAAE,MAAM;YAAM;YAC1B,SAAS;QACX;IACF;IAEA,MAAM,iBAAiB,CAAC;QACtB,OAAO,QAAQ,KAAK,CACjB,MAAM,CAAC,oKAAY,EACnB,GAAG,CAAC,CAAA,OAAQ,KAAK,IAAI,EACrB,IAAI,CAAC;IACV;IAEA,qBACE,8OAAC;QAAK,WAAU;;0BAEd,8OAAC;gBAAO,WAAU;0BAChB,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;sCAAuH;;;;;;sCAGtI,8OAAC;;8CACC,8OAAC;oCAAG,WAAU;8CAAmC;;;;;;8CACjD,8OAAC;oCAAE,WAAU;8CAAmD;;;;;;;;;;;;;;;;;;;;;;;0BAMtE,8OAAC;gBAAI,KAAK;gBAAW,WAAU;0BAC7B,cAAA,8OAAC;oBAAI,WAAU;;wBACZ,SAAS,MAAM,KAAK,mBACnB,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAG,WAAU;8CAAyC;;;;;;8CACvD,8OAAC;oCAAE,WAAU;8CAAwB;;;;;;;;;;;;wBAIxC,SAAS,GAAG,CAAC,CAAC,kBACb,8OAAC;gCAAe,WAAW,CAAC,KAAK,EAAE,EAAE,IAAI,KAAK,SAAS,gBAAgB,gBAAgB,KAAK,CAAC;0CAC3F,cAAA,8OAAC;oCAAI,WAAW,CAAC,sDAAsD,EACrE,EAAE,IAAI,KAAK,SACP,4CACA,mEACJ;8CACA,cAAA,8OAAC;wCAAI,WAAU;kDAAuB,eAAe;;;;;;;;;;;+BAN/C,EAAE,EAAE;;;;;;;;;;;;;;;;0BAcpB,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAK,UAAU;oBAAc,WAAU;;sCACtC,8OAAC;4BACC,WAAU;4BACV,OAAO;4BACP,aAAY;4BACZ,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;4BACxC,UAAU,WAAW;;;;;;sCAEvB,8OAAC;4BACC,MAAK;4BACL,UAAU,WAAW,eAAe,CAAC,MAAM,IAAI;4BAC/C,WAAU;sCAET,WAAW,cAAc,QAAQ;;;;;;;;;;;;;;;;;;;;;;;AAM9C"}}]
}